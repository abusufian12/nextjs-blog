"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8010],{88010:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var n=r(85893),o=r(20868),s=r(74231),u=r(67896),a=r(17608),i=r(24197),l=r(88519),c=r(57872);let d=s.Ry().shape({question:s.Z_().required("error-description-required")});function m(){let{t:e}=(0,o.$G)("common"),{data:t}=(0,a.X9)(),{createQuestion:r,isLoading:s}=(0,c.OZ)(),m=e=>{r({product_id:t.product_id,shop_id:t.shop_id,question:e.question})};return(0,n.jsxs)("div",{className:"flex h-full min-h-screen w-screen flex-col bg-light p-7 md:h-auto md:min-h-0 md:max-w-[590px] md:justify-center md:rounded-xl",children:[(0,n.jsx)("h3",{className:"mb-6 text-center text-lg font-semibold text-heading",children:e("text-ask-question")}),(0,n.jsx)(i.l,{onSubmit:m,validationSchema:d,children:t=>{var r;let{register:o,formState:{errors:a}}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{...o("question"),variant:"outline",className:"mb-5",error:e(null===(r=a.question)||void 0===r?void 0:r.message)}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs font-semibold leading-relaxed text-gray-500 ltr:pr-5 rtl:pl-5",children:e("text-question-additional-info")}),(0,n.jsx)(u.Z,{className:"h-11 w-auto sm:h-12",loading:s,disabled:s,children:e("text-submit")})]})]})}})]})}},88519:function(e,t,r){var n=r(85893),o=r(67294),s=r(94184),u=r.n(s);let a={normal:"bg-gray-100 border border-border-base focus:shadow focus:bg-light focus:border-accent",solid:"bg-gray-100 border border-border-100 focus:bg-light focus:border-accent",outline:"border border-border-base focus:border-accent"},i=o.forwardRef((e,t)=>{let{className:r,label:o,name:s,error:i,variant:l="normal",shadow:c=!1,inputClassName:d,...m}=e;return(0,n.jsxs)("div",{className:r,children:[o&&(0,n.jsx)("label",{htmlFor:s,className:"block text-body-dark font-semibold text-sm leading-none mb-3",children:o}),(0,n.jsx)("textarea",{id:s,name:s,className:u()("px-4 py-3 flex items-center w-full rounded appearance-none transition duration-300 ease-in-out text-heading text-sm focus:outline-none focus:ring-0",c&&"focus:shadow",a[l],d),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",rows:4,ref:t,...m}),i&&(0,n.jsx)("p",{className:"my-2 text-xs text-red-500",children:i})]})});i.displayName="TextArea",t.Z=i},57872:function(e,t,r){r.d(t,{Bk:function(){return x},AM:function(){return b},OZ:function(){return h},os:function(){return f},iB:function(){return p},rn:function(){return m},k5:function(){return g}});var n=r(88767),o=r(65927),s=r(64648),u=r(59787);let a=e=>{let{limit:t=30,price:r,categories:n,name:o,searchType:s,searchQuery:u,text:a,...i}=e||{};return{limit:t,...r&&{min_price:r},...o&&{name:o.toString()},...n&&{categories:n.toString()},...s&&{type:s.toString()},...u&&{name:u.toString()},...a&&{name:a.toString()},...i}};var i=r(20868),l=r(17608),c=r(40782),d=r(11163);function m(e){var t,r;let{locale:i}=(0,d.useRouter)(),l={...a(e),language:i},{data:c,isLoading:m,error:f,fetchNextPage:p,hasNextPage:g,isFetching:b,isFetchingNextPage:x}=(0,n.useInfiniteQuery)([s.P.PRODUCTS,l],e=>{let{queryKey:t,pageParam:r}=e;return o.Z.products.all(Object.assign({},t[1],r))},{getNextPageParam:e=>{let{current_page:t,last_page:r}=e;return r>t&&{page:t+1}}});return{products:null!==(r=null==c?void 0:null===(t=c.pages)||void 0===t?void 0:t.flatMap(e=>e.data))&&void 0!==r?r:[],paginatorInfo:Array.isArray(null==c?void 0:c.pages)?(0,u.Q)(null==c?void 0:c.pages[c.pages.length-1]):null,isLoading:m,error:f,isFetching:b,isLoadingMore:x,loadMore:function(){p()},hasMore:Boolean(g)}}let f=e=>{let{locale:t}=(0,d.useRouter)(),r={...e,language:t},{data:u,isLoading:a,error:i}=(0,n.useQuery)([s.P.PRODUCTS_POPULAR,r],e=>{let{queryKey:t}=e;return o.Z.products.popular(t[1])});return{products:null!=u?u:[],isLoading:a,error:i}};function p(e){let{slug:t}=e,{locale:r}=(0,d.useRouter)(),{data:u,isLoading:a,error:i}=(0,n.useQuery)([s.P.PRODUCTS,{slug:t,language:r}],()=>o.Z.products.get({slug:t,language:r}));return{product:u,isLoading:a,error:i}}function g(e){var t;let{data:r,isLoading:a,error:i,isFetching:l}=(0,n.useQuery)([s.P.PRODUCTS_QUESTIONS,e],e=>{let{queryKey:t}=e;return o.Z.products.questions(Object.assign({},t[1]))},{keepPreviousData:!0});return{questions:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:[],paginatorInfo:(0,u.Q)(r),isLoading:a,error:i,isFetching:l}}function b(){let{t:e}=(0,i.$G)("common"),t=(0,n.useQueryClient)(),{mutate:r,isLoading:u}=(0,n.useMutation)(o.Z.products.createFeedback,{onSuccess:r=>{c.Am.success(e("text-feedback-submitted")),t.refetchQueries(s.P.PRODUCTS_QUESTIONS),t.refetchQueries(s.P.PRODUCTS_REVIEWS)}});return{createFeedback:r,isLoading:u}}function x(){let{t:e}=(0,i.$G)("common"),{closeModal:t}=(0,l.SO)(),{mutate:r,isLoading:s}=(0,n.useMutation)(o.Z.products.createAbuseReport,{onSuccess:()=>{c.Am.success(e("text-abuse-report-submitted"))},onError:t=>{let{response:{data:r}}=null!=t?t:{};c.Am.error(e(null==r?void 0:r.message))},onSettled:()=>{t()}});return{createAbuseReport:r,isLoading:s}}function h(){let{t:e}=(0,i.$G)("common"),{closeModal:t}=(0,l.SO)(),r=(0,n.useQueryClient)(),{mutate:u,isLoading:a}=(0,n.useMutation)(o.Z.products.createQuestion,{onSuccess:()=>{c.Am.success(e("text-question-submitted"))},onError:t=>{let{response:{data:r}}=null!=t?t:{};c.Am.error(e(null==r?void 0:r.message))},onSettled:()=>{r.refetchQueries(s.P.PRODUCTS_QUESTIONS),t()}});return{createQuestion:u,isLoading:a}}}}]);