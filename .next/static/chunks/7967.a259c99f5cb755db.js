"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7967],{17967:function(e,r,t){t.r(r),t.d(r,{RefundForm:function(){return g}});var n=t(85893),a=t(67896),l=t(88172),o=t(24197),s=t(25788),i=t(55443),u=t(88519),d=t(17608),c=t(88909),m=t(31567),f=t(74231);let x=f.Ry().shape({title:f.Z_().required("error-title-required"),description:f.Z_().required("error-description-required")}),g=e=>{let{loading:r,onSubmit:t}=e,{t:d}=(0,m.$)("common");return(0,n.jsxs)("div",{className:"py-6 px-5 sm:p-8 bg-light w-screen md:max-w-[480px] min-h-screen md:min-h-0 h-full md:h-auto flex flex-col justify-center md:rounded-xl",children:[(0,n.jsxs)("h1",{className:"mb-5 text-lg font-semibold text-center text-heading sm:mb-6",children:[d("text-add-new")," ",d("text-refund")]}),(0,n.jsx)(o.l,{onSubmit:t,validationSchema:x,children:e=>{var t,o;let{register:c,control:m,formState:{errors:f}}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{label:d("text-reason"),...c("title"),variant:"outline",className:"mb-5",error:d(null===(t=f.title)||void 0===t?void 0:t.message)}),(0,n.jsx)(u.Z,{label:d("text-description"),...c("description"),variant:"outline",className:"mb-5",error:d(null===(o=f.description)||void 0===o?void 0:o.message)}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)(i.Z,{htmlFor:"images",children:d("text-product-image")}),(0,n.jsx)(l.Z,{control:m,name:"images",multiple:!0})]}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(a.Z,{className:"w-full h-11 sm:h-12",loading:r,disabled:r,children:d("text-submit")})})]})}})]})},p=()=>{let{createRefundRequest:e,isLoading:r}=(0,c.U5)(),{data:t}=(0,d.X9)();return(0,n.jsx)(g,{onSubmit:function(r){let{title:n,description:a,images:l}=r;e({order_id:t,title:n,description:a,images:l})},loading:r})};r.default=p},88172:function(e,r,t){t.d(r,{Z:function(){return f}});var n=t(85893),a=t(67294),l=t(32512),o=t(20868);let s=e=>{let{color:r="currentColor",width:t="41px",height:a="30px",...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:a,viewBox:"0 0 40.909 30",...l,children:(0,n.jsx)("g",{transform:"translate(0 -73.091)",children:(0,n.jsx)("path",{"data-name":"Path 2125",d:"M39.129,89.827A8.064,8.064,0,0,0,34.58,86.94,5.446,5.446,0,0,0,30,78.546a5.207,5.207,0,0,0-3.537,1.321,10.921,10.921,0,0,0-10.1-6.776,10.511,10.511,0,0,0-7.713,3.2A10.508,10.508,0,0,0,5.454,84q0,.277.043.916A9.528,9.528,0,0,0,0,93.546a9.193,9.193,0,0,0,2.8,6.743,9.191,9.191,0,0,0,6.744,2.8H32.728a8.172,8.172,0,0,0,6.4-13.264Zm-12.06-.575a.656.656,0,0,1-.479.2H21.818v7.5a.691.691,0,0,1-.681.681H17.045a.691.691,0,0,1-.682-.681v-7.5H11.59a.655.655,0,0,1-.681-.681.8.8,0,0,1,.213-.512L18.6,80.783a.722.722,0,0,1,.98,0l7.5,7.5a.663.663,0,0,1,.191.49A.656.656,0,0,1,27.07,89.252Z",transform:"translate(0)",fill:"#e6e6e6"})})})};var i=t(26631),u=t(74833);function d(e){let{onChange:r,value:t,name:d,onBlur:c,multiple:m=!1}=e,{t:f}=(0,o.$G)("common"),{mutate:x,isLoading:g,files:p}=(0,u.xh)({onChange:r,defaultFiles:t}),h=(0,a.useCallback)(e=>{x(e)},[x]),{getRootProps:v,getInputProps:b}=(0,l.uI)({accept:"image/*",multiple:m,onDrop:h}),j=p.map((e,r)=>(0,n.jsx)("div",{className:"relative mt-2 inline-flex flex-col overflow-hidden rounded border border-border-100 ltr:mr-2 rtl:ml-2",children:(0,n.jsx)("div",{className:"flex h-16 w-16 min-w-0 items-center justify-center overflow-hidden",children:(0,n.jsx)("img",{src:e.preview,alt:null==e?void 0:e.name})})},r));return(0,a.useEffect)(()=>()=>{p.forEach(e=>URL.revokeObjectURL(e.preview))},[p]),(0,n.jsxs)("section",{className:"upload",children:[(0,n.jsxs)("div",{...v({className:"border-dashed border-2 border-border-base h-36 rounded flex flex-col justify-center items-center cursor-pointer focus:border-accent-400 focus:outline-none"}),children:[(0,n.jsx)("input",{...b({name:d,onBlur:c})}),(0,n.jsx)(s,{className:"text-muted-light"}),(0,n.jsxs)("p",{className:"mt-4 text-center text-sm text-body",children:[(0,n.jsx)("span",{className:"font-semibold text-accent",children:f("text-upload-highlight")})," ",f("text-upload-message")," ",(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"text-xs text-body",children:f("text-img-format")})]})]}),(0,n.jsxs)("aside",{className:"mt-2 flex flex-wrap",children:[!!j.length&&j,g&&(0,n.jsx)("div",{className:"mt-2 flex h-16 items-center ltr:ml-2 rtl:mr-2",children:(0,n.jsx)(i.Z,{text:f("text-loading"),simple:!0,className:"h-6 w-6"})})]})]})}var c=t(87536);let m=e=>{let{control:r,name:t,multiple:a}=e;return(0,n.jsx)(c.Qr,{control:r,name:t,defaultValue:[],render:e=>{let{field:{ref:r,...t}}=e;return(0,n.jsx)(d,{...t,multiple:a})}})};var f=m},55443:function(e,r,t){var n=t(85893),a=t(94184),l=t.n(a);let o=e=>{let{className:r,...t}=e;return(0,n.jsx)("label",{className:l()("block text-body-dark font-semibold text-sm leading-none mb-3",r),...t})};r.Z=o},88519:function(e,r,t){var n=t(85893),a=t(67294),l=t(94184),o=t.n(l);let s={normal:"bg-gray-100 border border-border-base focus:shadow focus:bg-light focus:border-accent",solid:"bg-gray-100 border border-border-100 focus:bg-light focus:border-accent",outline:"border border-border-base focus:border-accent"},i=a.forwardRef((e,r)=>{let{className:t,label:a,name:l,error:i,variant:u="normal",shadow:d=!1,inputClassName:c,...m}=e;return(0,n.jsxs)("div",{className:t,children:[a&&(0,n.jsx)("label",{htmlFor:l,className:"block text-body-dark font-semibold text-sm leading-none mb-3",children:a}),(0,n.jsx)("textarea",{id:l,name:l,className:o()("px-4 py-3 flex items-center w-full rounded appearance-none transition duration-300 ease-in-out text-heading text-sm focus:outline-none focus:ring-0",d&&"focus:shadow",s[u],c),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",rows:4,ref:r,...m}),i&&(0,n.jsx)("p",{className:"my-2 text-xs text-red-500",children:i})]})});i.displayName="TextArea",r.Z=i},88909:function(e,r,t){t.d(r,{Aj:function(){return g},M6:function(){return v},Mc:function(){return N},QE:function(){return j},Rr:function(){return p},U5:function(){return b},pN:function(){return w},rT:function(){return h},yi:function(){return x}});var n=t(88767),a=t(31567),l=t(40782),o=t(17608),s=t(64648),i=t(65927),u=t(91131),d=t(33300),c=t(11163),m=t(87507),f=t(59787);function x(e){var r,t;let{locale:a}=(0,c.useRouter)(),l={...e},{data:o,isLoading:u,error:d,fetchNextPage:m,hasNextPage:x,isFetching:g,isFetchingNextPage:p}=(0,n.useInfiniteQuery)([s.P.ORDERS,l],e=>{let{queryKey:r,pageParam:t}=e;return i.Z.orders.all(Object.assign({},r[1],t))},{getNextPageParam:e=>{let{current_page:r,last_page:t}=e;return t>r&&{page:r+1}}});return{orders:null!==(t=null==o?void 0:null===(r=o.pages)||void 0===r?void 0:r.flatMap(e=>e.data))&&void 0!==t?t:[],paginatorInfo:Array.isArray(null==o?void 0:o.pages)?(0,f.Q)(null==o?void 0:o.pages[o.pages.length-1]):null,isLoading:u,error:d,isFetching:g,isLoadingMore:p,loadMore:function(){m()},hasMore:Boolean(x)}}function g(e){let{tracking_number:r}=e,{data:t,isLoading:a,error:l}=(0,n.useQuery)([s.P.ORDERS,r],()=>i.Z.orders.get(r));return{order:t,isLoading:a,error:l}}function p(e){var r,t;let{locale:a}=(0,c.useRouter)(),l={...e},{data:o,isFetching:u,isFetchingNextPage:d,fetchNextPage:m,hasNextPage:x,error:g}=(0,n.useInfiniteQuery)([s.P.ORDERS_STATUS,l],e=>{let{queryKey:r,pageParam:t}=e;return i.Z.orders.statuses(Object.assign({},r[1],t))},{getNextPageParam:e=>{let{current_page:r,last_page:t}=e;return t>r&&{page:r+1}}});return{orderStatuses:null!==(t=null==o?void 0:null===(r=o.pages)||void 0===r?void 0:r.flatMap(e=>e.data))&&void 0!==t?t:[],paginatorInfo:Array.isArray(null==o?void 0:o.pages)?(0,f.Q)(null==o?void 0:o.pages[o.pages.length-1]):null,isLoading:u,isLoadingMore:d,error:g,loadMore:function(){m()},hasMore:Boolean(x)}}function h(e){var r,t;let{locale:a}=(0,c.useRouter)(),l={...e},{data:o,isLoading:u,isFetchingNextPage:d,fetchNextPage:m,hasNextPage:x,error:g}=(0,n.useInfiniteQuery)([s.P.ORDERS_REFUNDS,l],e=>{let{queryKey:r,pageParam:t}=e;return i.Z.orders.refunds(Object.assign({},r[1],t))},{getNextPageParam:e=>{let{current_page:r,last_page:t}=e;return t>r&&{page:r+1}}});return{refunds:null!==(t=null==o?void 0:null===(r=o.pages)||void 0===r?void 0:r.flatMap(e=>e.data))&&void 0!==t?t:[],paginatorInfo:Array.isArray(null==o?void 0:o.pages)?(0,f.Q)(null==o?void 0:o.pages[o.pages.length-1]):null,isLoading:u,isLoadingMore:d,error:g,loadMore:function(){m()},hasMore:Boolean(x)}}let v=e=>{var r,t;let{locale:a}=(0,c.useRouter)(),l={...e},{data:o,isLoading:u,isFetchingNextPage:d,fetchNextPage:m,hasNextPage:x,error:g}=(0,n.useInfiniteQuery)([s.P.ORDERS_DOWNLOADS,l],e=>{let{queryKey:r,pageParam:t}=e;return i.Z.orders.downloadable(Object.assign({},r[1],t))},{getNextPageParam:e=>{let{current_page:r,last_page:t}=e;return t>r&&{page:r+1}}});return{downloads:null!==(t=null==o?void 0:null===(r=o.pages)||void 0===r?void 0:r.flatMap(e=>e.data))&&void 0!==t?t:[],paginatorInfo:Array.isArray(null==o?void 0:o.pages)?(0,f.Q)(null==o?void 0:o.pages[o.pages.length-1]):null,isLoading:u,isLoadingMore:d,error:g,loadMore:function(){m()},hasMore:Boolean(x)}};function b(){let{t:e}=(0,a.$)(),{locale:r}=(0,c.useRouter)(),{closeModal:t}=(0,o.SO)(),u=(0,n.useQueryClient)(),{mutate:d,isLoading:m}=(0,n.useMutation)(i.Z.orders.createRefund,{onSuccess:()=>{l.Am.success(e("text-refund-request-submitted"))},onError:r=>{let{response:{data:t}}=null!=r?r:{};l.Am.error(e(null==t?void 0:t.message))},onSettled:()=>{u.invalidateQueries(s.P.ORDERS),t()}});return{createRefundRequest:function(e){let r={...e};d(r)},isLoading:m}}function j(){let e=(0,c.useRouter)(),{locale:r}=e,{mutate:t,isLoading:a}=(0,n.useMutation)(i.Z.orders.create,{onSuccess:r=>{(null==r?void 0:r.tracking_number)&&e.push(m.Z.order(null==r?void 0:r.tracking_number))},onError:e=>{let{response:{data:r}}=null!=e?e:{};l.Am.error(null==r?void 0:r.message)}});return{createOrder:function(e){let n={...e,language:r};t(n)},isLoading:a}}function N(){let{mutate:e}=(0,n.useMutation)(i.Z.orders.generateDownloadLink,{onSuccess:e=>{var r;(r=document.createElement("a")).href=e,r.setAttribute("download","record.name"),r.click()}});return{generateDownloadableUrl:function(r){e({digital_file_id:r})}}}function w(){let[e,r]=(0,u.KO)(d.Jb);return(0,n.useMutation)(i.Z.orders.verify,{onSuccess:e=>{e&&r(e)},onError:e=>{let{response:{data:r}}=null!=e?e:{};l.Am.error(null==r?void 0:r.message)}})}}}]);