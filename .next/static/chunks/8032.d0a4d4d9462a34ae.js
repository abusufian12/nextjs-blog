"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8032],{28032:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var n=r(85893),o=r(20868),u=r(57872),s=r(24197),a=r(88519),l=r(67896);function c(e){let{data:t}=e,{t:r}=(0,o.$G)("common"),{createAbuseReport:c,isLoading:i}=(0,u.Bk)();return(0,n.jsx)("div",{className:"flex h-full min-h-screen w-screen flex-col justify-center bg-light p-7 md:h-auto md:min-h-0 md:max-w-[590px] md:rounded-xl",children:(0,n.jsx)(s.l,{onSubmit:function(e){c({...t,...e})},children:e=>{let{register:t}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(a.Z,{label:r("text-reason"),...t("message")}),(0,n.jsx)(l.Z,{loading:i,disabled:i,children:r("text-report")})]})}})})}},88519:function(e,t,r){var n=r(85893),o=r(67294),u=r(94184),s=r.n(u);let a={normal:"bg-gray-100 border border-border-base focus:shadow focus:bg-light focus:border-accent",solid:"bg-gray-100 border border-border-100 focus:bg-light focus:border-accent",outline:"border border-border-base focus:border-accent"},l=o.forwardRef((e,t)=>{let{className:r,label:o,name:u,error:l,variant:c="normal",shadow:i=!1,inputClassName:d,...f}=e;return(0,n.jsxs)("div",{className:r,children:[o&&(0,n.jsx)("label",{htmlFor:u,className:"block text-body-dark font-semibold text-sm leading-none mb-3",children:o}),(0,n.jsx)("textarea",{id:u,name:u,className:s()("px-4 py-3 flex items-center w-full rounded appearance-none transition duration-300 ease-in-out text-heading text-sm focus:outline-none focus:ring-0",i&&"focus:shadow",a[c],d),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",rows:4,ref:t,...f}),l&&(0,n.jsx)("p",{className:"my-2 text-xs text-red-500",children:l})]})});l.displayName="TextArea",t.Z=l},57872:function(e,t,r){r.d(t,{Bk:function(){return x},AM:function(){return b},OZ:function(){return h},os:function(){return m},iB:function(){return p},rn:function(){return f},k5:function(){return g}});var n=r(88767),o=r(65927),u=r(64648),s=r(59787);let a=e=>{let{limit:t=30,price:r,categories:n,name:o,searchType:u,searchQuery:s,text:a,...l}=e||{};return{limit:t,...r&&{min_price:r},...o&&{name:o.toString()},...n&&{categories:n.toString()},...u&&{type:u.toString()},...s&&{name:s.toString()},...a&&{name:a.toString()},...l}};var l=r(20868),c=r(17608),i=r(40782),d=r(11163);function f(e){var t,r;let{locale:l}=(0,d.useRouter)(),c={...a(e),language:l},{data:i,isLoading:f,error:m,fetchNextPage:p,hasNextPage:g,isFetching:b,isFetchingNextPage:x}=(0,n.useInfiniteQuery)([u.P.PRODUCTS,c],e=>{let{queryKey:t,pageParam:r}=e;return o.Z.products.all(Object.assign({},t[1],r))},{getNextPageParam:e=>{let{current_page:t,last_page:r}=e;return r>t&&{page:t+1}}});return{products:null!==(r=null==i?void 0:null===(t=i.pages)||void 0===t?void 0:t.flatMap(e=>e.data))&&void 0!==r?r:[],paginatorInfo:Array.isArray(null==i?void 0:i.pages)?(0,s.Q)(null==i?void 0:i.pages[i.pages.length-1]):null,isLoading:f,error:m,isFetching:b,isLoadingMore:x,loadMore:function(){p()},hasMore:Boolean(g)}}let m=e=>{let{locale:t}=(0,d.useRouter)(),r={...e,language:t},{data:s,isLoading:a,error:l}=(0,n.useQuery)([u.P.PRODUCTS_POPULAR,r],e=>{let{queryKey:t}=e;return o.Z.products.popular(t[1])});return{products:null!=s?s:[],isLoading:a,error:l}};function p(e){let{slug:t}=e,{locale:r}=(0,d.useRouter)(),{data:s,isLoading:a,error:l}=(0,n.useQuery)([u.P.PRODUCTS,{slug:t,language:r}],()=>o.Z.products.get({slug:t,language:r}));return{product:s,isLoading:a,error:l}}function g(e){var t;let{data:r,isLoading:a,error:l,isFetching:c}=(0,n.useQuery)([u.P.PRODUCTS_QUESTIONS,e],e=>{let{queryKey:t}=e;return o.Z.products.questions(Object.assign({},t[1]))},{keepPreviousData:!0});return{questions:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:[],paginatorInfo:(0,s.Q)(r),isLoading:a,error:l,isFetching:c}}function b(){let{t:e}=(0,l.$G)("common"),t=(0,n.useQueryClient)(),{mutate:r,isLoading:s}=(0,n.useMutation)(o.Z.products.createFeedback,{onSuccess:r=>{i.Am.success(e("text-feedback-submitted")),t.refetchQueries(u.P.PRODUCTS_QUESTIONS),t.refetchQueries(u.P.PRODUCTS_REVIEWS)}});return{createFeedback:r,isLoading:s}}function x(){let{t:e}=(0,l.$G)("common"),{closeModal:t}=(0,c.SO)(),{mutate:r,isLoading:u}=(0,n.useMutation)(o.Z.products.createAbuseReport,{onSuccess:()=>{i.Am.success(e("text-abuse-report-submitted"))},onError:t=>{let{response:{data:r}}=null!=t?t:{};i.Am.error(e(null==r?void 0:r.message))},onSettled:()=>{t()}});return{createAbuseReport:r,isLoading:u}}function h(){let{t:e}=(0,l.$G)("common"),{closeModal:t}=(0,c.SO)(),r=(0,n.useQueryClient)(),{mutate:s,isLoading:a}=(0,n.useMutation)(o.Z.products.createQuestion,{onSuccess:()=>{i.Am.success(e("text-question-submitted"))},onError:t=>{let{response:{data:r}}=null!=t?t:{};i.Am.error(e(null==r?void 0:r.message))},onSettled:()=>{r.refetchQueries(u.P.PRODUCTS_QUESTIONS),t()}});return{createQuestion:s,isLoading:a}}}}]);